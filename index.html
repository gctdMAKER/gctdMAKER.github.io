<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tower Defense Game</title>
    <style>
        body { margin:0; font-family: Arial, sans-serif; background: #333; color: #fff; }
        #controls { padding: 10px; display:flex; align-items:center; }
        button { margin-right: 10px; padding: 5px 10px; cursor:pointer; }
        .hidden { display:none; }
        #vote-modal { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
            background:#222; padding:30px; border:2px solid #fff; border-radius:15px;
            text-align:center; z-index:1000; display:none;
        }
        #vote-modal button { margin:5px; padding:5px 15px; }
    </style>
</head>
<body>
    <div id="controls">
        <button id="pause-button">Pause</button>
        <button id="vote-button">Vote</button>
        <span>Gold: <span id="gold-display">100</span></span>
        <span style="margin-left:20px;">Lives: <span id="lives-display">1500</span></span>
        <span style="margin-left:20px;">Wave: <span id="wave-display">0</span></span>
        <span style="margin-left:20px;">Timer: <span id="timer-display">--</span></span>
    </div>

    <canvas id="game-canvas" width="800" height="600" style="display:block; margin:20px auto; background:#444;"></canvas>

    <!-- Vote Modal -->
    <div id="vote-modal">
        <p style="font-size:20px; margin-bottom:20px;">Should enemies be able to destroy towers?</p>
        <button id="vote-yes">Yes (<span id="yes-count">0</span>)</button>
        <button id="vote-no">No (<span id="no-count">0</span>)</button>
        <br><br>
        <button id="close-vote">Close</button>
    </div>

    <script>
        // --- Game state variables ---
        let gold = 100;
        let lives = 1500;
        let wave = 0;
        let timer = '--';
        let isPaused = false;
        let gameHasStarted = false;

        const canvas = document.getElementById('game-canvas');
        const ctx = canvas.getContext('2d');

        const goldDisplay = document.getElementById('gold-display');
        const livesDisplay = document.getElementById('lives-display');
        const waveDisplay = document.getElementById('wave-display');
        const timerDisplay = document.getElementById('timer-display');

        const pauseButton = document.getElementById('pause-button');

        // --- Update UI ---
        function updateUI() {
            goldDisplay.textContent = gold;
            livesDisplay.textContent = lives;
            waveDisplay.textContent = wave;
            timerDisplay.textContent = timer;
        }

        // --- Pause toggle ---
        pauseButton.addEventListener('click', () => {
            togglePause();
        });

        function togglePause() {
            isPaused = !isPaused;
            if (isPaused) {
                console.log('Game Paused');
            } else {
                console.log('Game Resumed');
            }
        }

        // --- Voting system ---
        const voteButton = document.getElementById('vote-button');
        const voteModal = document.getElementById('vote-modal');
        const voteYes = document.getElementById('vote-yes');
        const voteNo = document.getElementById('vote-no');
        const closeVote = document.getElementById('close-vote');
        const yesCountSpan = document.getElementById('yes-count');
        const noCountSpan = document.getElementById('no-count');

        let voteMenuOpen = false;
        let yesVotes = 0;
        let noVotes = 0;
        let computerVoted = false;

        voteButton.addEventListener('click', () => {
            if (!voteMenuOpen) {
                if (!isPaused && gameHasStarted) togglePause();
                voteModal.style.display = 'block';
                voteMenuOpen = true;

                // Computer vote (once per game)
                if (!computerVoted) {
                    computerVoted = true;
                    const computerVote = Math.random() < 0.5 ? 'yes' : 'no';
                    if (computerVote === 'yes') {
                        yesVotes++;
                        yesCountSpan.textContent = yesVotes;
                    } else {
                        noVotes++;
                        noCountSpan.textContent = noVotes;
                    }
                }
            }
        });

        voteYes.addEventListener('click', () => {
            yesVotes++;
            yesCountSpan.textContent = yesVotes;
        });

        voteNo.addEventListener('click', () => {
            noVotes++;
            noCountSpan.textContent = noVotes;
        });

        closeVote.addEventListener('click', () => {
            voteModal.style.display = 'none';
            voteMenuOpen = false;
            if (isPaused && gameHasStarted) togglePause();
        });

        // --- Basic game loop ---
        function gameLoop() {
            if (!isPaused) {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                // --- Placeholder: draw something for testing ---
                ctx.fillStyle = 'yellow';
                ctx.fillRect(50 + wave*5 % canvas.width, 100, 50, 50);
            }
            requestAnimationFrame(gameLoop);
        }

        // --- Start the game ---
        function startGame() {
            gameHasStarted = true;
            updateUI();
            gameLoop();
        }

        startGame();

    </script>
</body>
</html>
